var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ShaderRegisterCache = require("awayjs-renderergl/lib/materials/compilation/ShaderRegisterCache");
var ShaderRegisterElement = require("awayjs-renderergl/lib/materials/compilation/ShaderRegisterElement");
/**
 * ...
 */
var AnimationRegisterCache = (function (_super) {
    __extends(AnimationRegisterCache, _super);
    function AnimationRegisterCache(profile) {
        _super.call(this, profile);
        this.indexDictionary = new Object();
        this.vertexConstantData = new Array();
        this.fragmentConstantData = new Array();
    }
    AnimationRegisterCache.prototype.reset = function () {
        _super.prototype.reset.call(this);
        this.rotationRegisters = new Array();
        this.positionAttribute = this.getRegisterFromString(this.sourceRegisters[0]);
        this.scaleAndRotateTarget = this.getRegisterFromString(this.targetRegisters[0]);
        this.addVertexTempUsages(this.scaleAndRotateTarget, 1);
        for (var i = 1; i < this.targetRegisters.length; i++) {
            this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[i]));
            this.addVertexTempUsages(this.rotationRegisters[i - 1], 1);
        }
        this.scaleAndRotateTarget = new ShaderRegisterElement(this.scaleAndRotateTarget.regName, this.scaleAndRotateTarget.index); //only use xyz, w is used as vertexLife
        //allot const register
        this.vertexZeroConst = this.getFreeVertexConstant();
        this.vertexZeroConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 0);
        this.vertexOneConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 1);
        this.vertexTwoConst = new ShaderRegisterElement(this.vertexZeroConst.regName, this.vertexZeroConst.index, 2);
        //allot temp register
        this.positionTarget = this.getFreeVertexVectorTemp();
        this.addVertexTempUsages(this.positionTarget, 1);
        this.positionTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
        if (this.needVelocity) {
            this.velocityTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.velocityTarget, 1);
            this.velocityTarget = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index);
            this.vertexTime = new ShaderRegisterElement(this.velocityTarget.regName, this.velocityTarget.index, 3);
            this.vertexLife = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index, 3);
        }
        else {
            var tempTime = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(tempTime, 1);
            this.vertexTime = new ShaderRegisterElement(tempTime.regName, tempTime.index, 0);
            this.vertexLife = new ShaderRegisterElement(tempTime.regName, tempTime.index, 1);
        }
    };
    AnimationRegisterCache.prototype.setUVSourceAndTarget = function (UVAttribute, UVVaring) {
        this.uvVar = this.getRegisterFromString(UVVaring);
        this.uvAttribute = this.getRegisterFromString(UVAttribute);
        //uv action is processed after normal actions,so use offsetTarget as uvTarget
        this.uvTarget = new ShaderRegisterElement(this.positionTarget.regName, this.positionTarget.index);
    };
    AnimationRegisterCache.prototype.setRegisterIndex = function (node, parameterIndex /*int*/, registerIndex /*int*/) {
        //8 should be enough for any node.
        var t = this.indexDictionary[node.id];
        if (t == null)
            t = this.indexDictionary[node.id] = new Array(8);
        t[parameterIndex] = registerIndex;
    };
    AnimationRegisterCache.prototype.getRegisterIndex = function (node, parameterIndex /*int*/) {
        return this.indexDictionary[node.id][parameterIndex];
    };
    AnimationRegisterCache.prototype.getInitCode = function () {
        var len = this.sourceRegisters.length;
        var code = "";
        for (var i = 0; i < len; i++)
            code += "mov " + this.targetRegisters[i] + "," + this.sourceRegisters[i] + "\n";
        code += "mov " + this.positionTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        if (this.needVelocity)
            code += "mov " + this.velocityTarget + ".xyz," + this.vertexZeroConst.toString() + "\n";
        return code;
    };
    AnimationRegisterCache.prototype.getCombinationCode = function () {
        return "add " + this.scaleAndRotateTarget + ".xyz," + this.scaleAndRotateTarget + ".xyz," + this.positionTarget + ".xyz\n";
    };
    AnimationRegisterCache.prototype.initColorRegisters = function () {
        var code = "";
        if (this.hasColorMulNode) {
            this.colorMulTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorMulTarget, 1);
            this.colorMulVary = this.getFreeVarying();
            code += "mov " + this.colorMulTarget + "," + this.vertexOneConst + "\n";
        }
        if (this.hasColorAddNode) {
            this.colorAddTarget = this.getFreeVertexVectorTemp();
            this.addVertexTempUsages(this.colorAddTarget, 1);
            this.colorAddVary = this.getFreeVarying();
            code += "mov " + this.colorAddTarget + "," + this.vertexZeroConst + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorPassCode = function () {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            if (this.hasColorMulNode)
                code += "mov " + this.colorMulVary + "," + this.colorMulTarget + "\n";
            if (this.hasColorAddNode)
                code += "mov " + this.colorAddVary + "," + this.colorAddTarget + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getColorCombinationCode = function (shadedTarget) {
        var code = "";
        if (this.needFragmentAnimation && (this.hasColorAddNode || this.hasColorMulNode)) {
            var colorTarget = this.getRegisterFromString(shadedTarget);
            this.addFragmentTempUsages(colorTarget, 1);
            if (this.hasColorMulNode)
                code += "mul " + colorTarget + "," + colorTarget + "," + this.colorMulVary + "\n";
            if (this.hasColorAddNode)
                code += "add " + colorTarget + "," + colorTarget + "," + this.colorAddVary + "\n";
        }
        return code;
    };
    AnimationRegisterCache.prototype.getRegisterFromString = function (code) {
        var temp = code.split(/(\d+)/);
        return new ShaderRegisterElement(temp[0], parseInt(temp[1]));
    };
    Object.defineProperty(AnimationRegisterCache.prototype, "numVertexConstant", {
        get: function () {
            return this._numVertexConstant;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AnimationRegisterCache.prototype, "numFragmentConstant", {
        get: function () {
            return this._numFragmentConstant;
        },
        enumerable: true,
        configurable: true
    });
    AnimationRegisterCache.prototype.setDataLength = function () {
        this._numVertexConstant = this.numUsedVertexConstants - this.vertexConstantOffset;
        this._numFragmentConstant = this.numUsedFragmentConstants - this.fragmentConstantOffset;
        this.vertexConstantData.length = this._numVertexConstant * 4;
        this.fragmentConstantData.length = this._numFragmentConstant * 4;
    };
    AnimationRegisterCache.prototype.setVertexConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = x;
        this.vertexConstantData[_index++] = y;
        this.vertexConstantData[_index++] = z;
        this.vertexConstantData[_index] = w;
    };
    AnimationRegisterCache.prototype.setVertexConstFromArray = function (index /*int*/, data) {
        var _index = (index - this.vertexConstantOffset) * 4;
        for (var i = 0; i < data.length; i++)
            this.vertexConstantData[_index++] = data[i];
    };
    AnimationRegisterCache.prototype.setVertexConstFromMatrix = function (index /*int*/, matrix) {
        var rawData = matrix.rawData;
        var _index = (index - this.vertexConstantOffset) * 4;
        this.vertexConstantData[_index++] = rawData[0];
        this.vertexConstantData[_index++] = rawData[4];
        this.vertexConstantData[_index++] = rawData[8];
        this.vertexConstantData[_index++] = rawData[12];
        this.vertexConstantData[_index++] = rawData[1];
        this.vertexConstantData[_index++] = rawData[5];
        this.vertexConstantData[_index++] = rawData[9];
        this.vertexConstantData[_index++] = rawData[13];
        this.vertexConstantData[_index++] = rawData[2];
        this.vertexConstantData[_index++] = rawData[6];
        this.vertexConstantData[_index++] = rawData[10];
        this.vertexConstantData[_index++] = rawData[14];
        this.vertexConstantData[_index++] = rawData[3];
        this.vertexConstantData[_index++] = rawData[7];
        this.vertexConstantData[_index++] = rawData[11];
        this.vertexConstantData[_index] = rawData[15];
    };
    AnimationRegisterCache.prototype.setFragmentConst = function (index /*int*/, x, y, z, w) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (z === void 0) { z = 0; }
        if (w === void 0) { w = 0; }
        var _index = (index - this.fragmentConstantOffset) * 4;
        this.fragmentConstantData[_index++] = x;
        this.fragmentConstantData[_index++] = y;
        this.fragmentConstantData[_index++] = z;
        this.fragmentConstantData[_index] = w;
    };
    return AnimationRegisterCache;
})(ShaderRegisterCache);
module.exports = AnimationRegisterCache;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9hbmltYXRvcnMvZGF0YS9hbmltYXRpb25yZWdpc3RlcmNhY2hlLnRzIl0sIm5hbWVzIjpbIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmNvbnN0cnVjdG9yIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5yZXNldCIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VVZTb3VyY2VBbmRUYXJnZXQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldFJlZ2lzdGVySW5kZXgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVySW5kZXgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldEluaXRDb2RlIiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5nZXRDb21iaW5hdGlvbkNvZGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmluaXRDb2xvclJlZ2lzdGVycyIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0Q29sb3JQYXNzQ29kZSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuZ2V0Q29sb3JDb21iaW5hdGlvbkNvZGUiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLmdldFJlZ2lzdGVyRnJvbVN0cmluZyIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUubnVtVmVydGV4Q29uc3RhbnQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLm51bUZyYWdtZW50Q29uc3RhbnQiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldERhdGFMZW5ndGgiLCJBbmltYXRpb25SZWdpc3RlckNhY2hlLnNldFZlcnRleENvbnN0IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRWZXJ0ZXhDb25zdEZyb21BcnJheSIsIkFuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuc2V0VmVydGV4Q29uc3RGcm9tTWF0cml4IiwiQW5pbWF0aW9uUmVnaXN0ZXJDYWNoZS5zZXRGcmFnbWVudENvbnN0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQSxJQUFPLG1CQUFtQixXQUFhLGlFQUFpRSxDQUFDLENBQUM7QUFDMUcsSUFBTyxxQkFBcUIsV0FBWSxtRUFBbUUsQ0FBQyxDQUFDO0FBRzdHLEFBR0E7O0dBREc7SUFDRyxzQkFBc0I7SUFBU0EsVUFBL0JBLHNCQUFzQkEsVUFBNEJBO0lBOEN2REEsU0E5Q0tBLHNCQUFzQkEsQ0E4Q2ZBLE9BQWNBO1FBRXpCQyxrQkFBTUEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFmUkEsb0JBQWVBLEdBQVVBLElBQUlBLE1BQU1BLEVBQUVBLENBQUNBO1FBMkp2Q0EsdUJBQWtCQSxHQUFpQkEsSUFBSUEsS0FBS0EsRUFBVUEsQ0FBQ0E7UUFDdkRBLHlCQUFvQkEsR0FBaUJBLElBQUlBLEtBQUtBLEVBQVVBLENBQUNBO0lBNUloRUEsQ0FBQ0E7SUFFTUQsc0NBQUtBLEdBQVpBO1FBRUNFLGdCQUFLQSxDQUFDQSxLQUFLQSxXQUFFQSxDQUFDQTtRQUVkQSxJQUFJQSxDQUFDQSxpQkFBaUJBLEdBQUdBLElBQUlBLEtBQUtBLEVBQXlCQSxDQUFDQTtRQUM1REEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxHQUFHQSxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBQzdFQSxJQUFJQSxDQUFDQSxvQkFBb0JBLEdBQUdBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDaEZBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUV2REEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBa0JBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQ3JFQSxJQUFJQSxDQUFDQSxpQkFBaUJBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakZBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUM1REEsQ0FBQ0E7UUFFREEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsT0FBT0EsRUFBRUEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxLQUFLQSxDQUFDQSxFQUFFQSx1Q0FBdUNBO1FBRWxLQSxBQUVBQSxzQkFGc0JBO1FBRXRCQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQSxxQkFBcUJBLEVBQUVBLENBQUNBO1FBQ3BEQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQzlHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FBQzdHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxJQUFJQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLE9BQU9BLEVBQUVBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1FB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Q0EsQ0FBQ0E7WUFDMUJBLElBQUlBLENBQUNBLGNBQWNBLEdBQUdBLElBQUlBLENBQUNBLHVCQUF1QkEsRUFBRUEsQ0FBQ0E7WUFDckRBLElBQUlBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDakRBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLGNBQWNBLEVBQUVBLENBQUNBO1lBQzFDQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxlQUFlQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUMxRUEsQ0FBQ0E7UUFDREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDYkEsQ0FBQ0E7SUFFTVIsaURBQWdCQSxHQUF2QkE7UUFFQ1MsSUFBSUEsSUFBSUEsR0FBVUEsRUFBRUEsQ0FBQ0E7UUFDckJBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLHFCQUFxQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsSUFBSUEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDbEZBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBO2dCQUN4QkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0E7WUFDdkVBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGVBQWVBLENBQUNBO2dCQUN4QkEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsR0FBR0EsR0FBR0EsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDeEVBLENBQUNBO1FBQ0RBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2JB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QSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMvQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUNoREEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtJQUUvQ0EsQ0FBQ0E7SUFFTWpCLGlEQUFnQkEsR0FBdkJBLFVBQXdCQSxLQUFLQSxDQUFRQSxPQUFEQSxBQUFRQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQSxFQUFFQSxDQUFZQTtRQUF0RGtCLGlCQUFZQSxHQUFaQSxLQUFZQTtRQUFFQSxpQkFBWUEsR0FBWkEsS0FBWUE7UUFBRUEsaUJBQVlBLEdBQVpBLEtBQVlBO1FBQUVBLGlCQUFZQSxHQUFaQSxLQUFZQTtRQUVuR0EsSUFBSUEsTUFBTUEsR0FBa0JBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBLHNCQUFzQkEsQ0FBQ0EsR0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDcEVBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDeENBLElBQUlBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDdkNBLENBQUNBO0lBQ0ZsQiw2QkFBQ0E7QUFBREEsQ0FuUUEsQUFtUUNBLEVBblFvQyxtQkFBbUIsRUFtUXZEO0FBRUQsQUFBZ0MsaUJBQXZCLHNCQUFzQixDQUFDIiwiZmlsZSI6ImFuaW1hdG9ycy9kYXRhL0FuaW1hdGlvblJlZ2lzdGVyQ2FjaGUuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hdHJpeDNEXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0cml4M0RcIik7XG5cbmltcG9ydCBBbmltYXRpb25Ob2RlQmFzZVx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9hbmltYXRvcnMvbm9kZXMvQW5pbWF0aW9uTm9kZUJhc2VcIik7XG5cbmltcG9ydCBTaGFkZXJSZWdpc3RlckNhY2hlXHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL21hdGVyaWFscy9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckNhY2hlXCIpO1xuaW1wb3J0IFNoYWRlclJlZ2lzdGVyRWxlbWVudFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvbWF0ZXJpYWxzL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyRWxlbWVudFwiKTtcblxuXG4vKipcbiAqIC4uLlxuICovXG5jbGFzcyBBbmltYXRpb25SZWdpc3RlckNhY2hlIGV4dGVuZHMgU2hhZGVyUmVnaXN0ZXJDYWNoZVxue1xuXHQvL3ZlcnRleFxuXHRwdWJsaWMgcG9zaXRpb25BdHRyaWJ1dGU6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdXZBdHRyaWJ1dGU6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgcG9zaXRpb25UYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgc2NhbGVBbmRSb3RhdGVUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdmVsb2NpdHlUYXJnZXQ6U2hhZGVyUmVnaXN0ZXJFbGVtZW50O1xuXHRwdWJsaWMgdmVydGV4VGltZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyB2ZXJ0ZXhMaWZlOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIHZlcnRleFplcm9Db25zdDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyB2ZXJ0ZXhPbmVDb25zdDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyB2ZXJ0ZXhUd29Db25zdDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyB1dlRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyBjb2xvckFkZFRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdHB1YmxpYyBjb2xvck11bFRhcmdldDpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cdC8vdmFyeVxuXHRwdWJsaWMgY29sb3JBZGRWYXJ5OlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcblx0cHVibGljIGNvbG9yTXVsVmFyeTpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cblx0Ly9mcmFnbWVudFxuXG5cdHB1YmxpYyB1dlZhcjpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XG5cblx0Ly90aGVzZSBhcmUgdGFyZ2V0cyBvbmx5IG5lZWQgdG8gcm90YXRlICggbm9ybWFsIGFuZCB0YW5nZW50IClcblx0cHVibGljIHJvdGF0aW9uUmVnaXN0ZXJzOkFycmF5PFNoYWRlclJlZ2lzdGVyRWxlbWVudD47XG5cblx0cHVibGljIG5lZWRGcmFnbWVudEFuaW1hdGlvbjpib29sZWFuO1xuXHRwdWJsaWMgbmVlZFVWQW5pbWF0aW9uOmJvb2xlYW47XG5cblx0cHVibGljIHNvdXJjZVJlZ2lzdGVyczpBcnJheTxzdHJpbmc+O1xuXHRwdWJsaWMgdGFyZ2V0UmVnaXN0ZXJzOkFycmF5PHN0cmluZz47XG5cblx0cHJpdmF0ZSBpbmRleERpY3Rpb25hcnk6T2JqZWN0ID0gbmV3IE9iamVjdCgpO1xuXG5cdC8vc2V0IHRydWUgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBjaGFuZ2UgVVZcblx0cHVibGljIGhhc1VWTm9kZTpib29sZWFuO1xuXHQvL3NldCBpZiB0aGUgb3RoZXIgbm9kZXMgbmVlZCB0byBhY2Nlc3MgdGhlIHZlbG9jaXR5XG5cdHB1YmxpYyBuZWVkVmVsb2NpdHk6Ym9vbGVhbjtcblx0Ly9zZXQgaWYgaGFzIGEgYmlsbGJvYXJkIG5vZGUuXG5cdHB1YmxpYyBoYXNCaWxsYm9hcmQ6Ym9vbGVhbjtcblx0Ly9zZXQgaWYgaGFzIGFuIG5vZGUgd2hpY2ggd2lsbCBhcHBseSBjb2xvciBtdWx0aXBsZSBvcGVyYXRpb25cblx0cHVibGljIGhhc0NvbG9yTXVsTm9kZTpib29sZWFuO1xuXHQvL3NldCBpZiBoYXMgYW4gbm9kZSB3aGljaCB3aWxsIGFwcGx5IGNvbG9yIGFkZCBvcGVyYXRpb25cblx0cHVibGljIGhhc0NvbG9yQWRkTm9kZTpib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHByb2ZpbGU6c3RyaW5nKVxuXHR7XG5cdFx0c3VwZXIocHJvZmlsZSk7XG5cdH1cblxuXHRwdWJsaWMgcmVzZXQoKVxuXHR7XG5cdFx0c3VwZXIucmVzZXQoKTtcblxuXHRcdHRoaXMucm90YXRpb25SZWdpc3RlcnMgPSBuZXcgQXJyYXk8U2hhZGVyUmVnaXN0ZXJFbGVtZW50PigpO1xuXHRcdHRoaXMucG9zaXRpb25BdHRyaWJ1dGUgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyh0aGlzLnNvdXJjZVJlZ2lzdGVyc1swXSk7XG5cdFx0dGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCA9IHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKHRoaXMudGFyZ2V0UmVnaXN0ZXJzWzBdKTtcblx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCwgMSk7XG5cblx0XHRmb3IgKHZhciBpOm51bWJlciAvKmludCovID0gMTsgaSA8IHRoaXMudGFyZ2V0UmVnaXN0ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLnJvdGF0aW9uUmVnaXN0ZXJzLnB1c2godGhpcy5nZXRSZWdpc3RlckZyb21TdHJpbmcodGhpcy50YXJnZXRSZWdpc3RlcnNbaV0pKTtcblx0XHRcdHRoaXMuYWRkVmVydGV4VGVtcFVzYWdlcyh0aGlzLnJvdGF0aW9uUmVnaXN0ZXJzW2kgLSAxXSwgMSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5zY2FsZUFuZFJvdGF0ZVRhcmdldC5yZWdOYW1lLCB0aGlzLnNjYWxlQW5kUm90YXRlVGFyZ2V0LmluZGV4KTsgLy9vbmx5IHVzZSB4eXosIHcgaXMgdXNlZCBhcyB2ZXJ0ZXhMaWZlXG5cblx0XHQvL2FsbG90IGNvbnN0IHJlZ2lzdGVyXG5cblx0XHR0aGlzLnZlcnRleFplcm9Db25zdCA9IHRoaXMuZ2V0RnJlZVZlcnRleENvbnN0YW50KCk7XG5cdFx0dGhpcy52ZXJ0ZXhaZXJvQ29uc3QgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMudmVydGV4WmVyb0NvbnN0LnJlZ05hbWUsIHRoaXMudmVydGV4WmVyb0NvbnN0LmluZGV4LCAwKTtcblx0XHR0aGlzLnZlcnRleE9uZUNvbnN0ID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0aGlzLnZlcnRleFplcm9Db25zdC5yZWdOYW1lLCB0aGlzLnZlcnRleFplcm9Db25zdC5pbmRleCwgMSk7XG5cdFx0dGhpcy52ZXJ0ZXhUd29Db25zdCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy52ZXJ0ZXhaZXJvQ29uc3QucmVnTmFtZSwgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QuaW5kZXgsIDIpO1xuXG5cdFx0Ly9hbGxvdCB0ZW1wIHJlZ2lzdGVyXG5cdFx0dGhpcy5wb3NpdGlvblRhcmdldCA9IHRoaXMuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcblx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5wb3NpdGlvblRhcmdldCwgMSk7XG5cdFx0dGhpcy5wb3NpdGlvblRhcmdldCA9IG5ldyBTaGFkZXJSZWdpc3RlckVsZW1lbnQodGhpcy5wb3NpdGlvblRhcmdldC5yZWdOYW1lLCB0aGlzLnBvc2l0aW9uVGFyZ2V0LmluZGV4KTtcblxuXHRcdGlmICh0aGlzLm5lZWRWZWxvY2l0eSkge1xuXHRcdFx0dGhpcy52ZWxvY2l0eVRhcmdldCA9IHRoaXMuZ2V0RnJlZVZlcnRleFZlY3RvclRlbXAoKTtcblx0XHRcdHRoaXMuYWRkVmVydGV4VGVtcFVzYWdlcyh0aGlzLnZlbG9jaXR5VGFyZ2V0LCAxKTtcblx0XHRcdHRoaXMudmVsb2NpdHlUYXJnZXQgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMudmVsb2NpdHlUYXJnZXQucmVnTmFtZSwgdGhpcy52ZWxvY2l0eVRhcmdldC5pbmRleCk7XG5cdFx0XHR0aGlzLnZlcnRleFRpbWUgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMudmVsb2NpdHlUYXJnZXQucmVnTmFtZSwgdGhpcy52ZWxvY2l0eVRhcmdldC5pbmRleCwgMyk7XG5cdFx0XHR0aGlzLnZlcnRleExpZmUgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMucG9zaXRpb25UYXJnZXQucmVnTmFtZSwgdGhpcy5wb3NpdGlvblRhcmdldC5pbmRleCwgMyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciB0ZW1wVGltZTpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSB0aGlzLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XG5cdFx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGVtcFRpbWUsIDEpO1xuXHRcdFx0dGhpcy52ZXJ0ZXhUaW1lID0gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0ZW1wVGltZS5yZWdOYW1lLCB0ZW1wVGltZS5pbmRleCwgMCk7XG5cdFx0XHR0aGlzLnZlcnRleExpZmUgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRlbXBUaW1lLnJlZ05hbWUsIHRlbXBUaW1lLmluZGV4LCAxKTtcblx0XHR9XG5cblx0fVxuXG5cdHB1YmxpYyBzZXRVVlNvdXJjZUFuZFRhcmdldChVVkF0dHJpYnV0ZTpzdHJpbmcsIFVWVmFyaW5nOnN0cmluZylcblx0e1xuXHRcdHRoaXMudXZWYXIgPSB0aGlzLmdldFJlZ2lzdGVyRnJvbVN0cmluZyhVVlZhcmluZyk7XG5cdFx0dGhpcy51dkF0dHJpYnV0ZSA9IHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKFVWQXR0cmlidXRlKTtcblx0XHQvL3V2IGFjdGlvbiBpcyBwcm9jZXNzZWQgYWZ0ZXIgbm9ybWFsIGFjdGlvbnMsc28gdXNlIG9mZnNldFRhcmdldCBhcyB1dlRhcmdldFxuXHRcdHRoaXMudXZUYXJnZXQgPSBuZXcgU2hhZGVyUmVnaXN0ZXJFbGVtZW50KHRoaXMucG9zaXRpb25UYXJnZXQucmVnTmFtZSwgdGhpcy5wb3NpdGlvblRhcmdldC5pbmRleCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0UmVnaXN0ZXJJbmRleChub2RlOkFuaW1hdGlvbk5vZGVCYXNlLCBwYXJhbWV0ZXJJbmRleDpudW1iZXIgLyppbnQqLywgcmVnaXN0ZXJJbmRleDpudW1iZXIgLyppbnQqLylcblx0e1xuXHRcdC8vOCBzaG91bGQgYmUgZW5vdWdoIGZvciBhbnkgbm9kZS5cblx0XHR2YXIgdDpBcnJheTxudW1iZXI+IC8qaW50Ki8gPSB0aGlzLmluZGV4RGljdGlvbmFyeVtub2RlLmlkXTtcblxuXHRcdGlmICh0ID09IG51bGwpXG5cdFx0XHR0ID0gdGhpcy5pbmRleERpY3Rpb25hcnlbbm9kZS5pZF0gPSBuZXcgQXJyYXk8bnVtYmVyPig4KSAvKmludCovO1xuXG5cdFx0dFtwYXJhbWV0ZXJJbmRleF0gPSByZWdpc3RlckluZGV4O1xuXHR9XG5cblx0cHVibGljIGdldFJlZ2lzdGVySW5kZXgobm9kZTpBbmltYXRpb25Ob2RlQmFzZSwgcGFyYW1ldGVySW5kZXg6bnVtYmVyIC8qaW50Ki8pOm51bWJlciAvKmludCovXG5cdHtcblx0XHRyZXR1cm4gKDxBcnJheTxudW1iZXI+PiB0aGlzLmluZGV4RGljdGlvbmFyeVtub2RlLmlkXSlbcGFyYW1ldGVySW5kZXhdO1xuXHR9XG5cblx0cHVibGljIGdldEluaXRDb2RlKCk6c3RyaW5nXG5cdHtcblx0XHR2YXIgbGVuOm51bWJlciAvKmludCovID0gdGhpcy5zb3VyY2VSZWdpc3RlcnMubGVuZ3RoO1xuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XG5cdFx0Zm9yICh2YXIgaTpudW1iZXIgLyppbnQqLyA9IDA7IGkgPCBsZW47IGkrKylcblx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLnRhcmdldFJlZ2lzdGVyc1tpXSArIFwiLFwiICsgdGhpcy5zb3VyY2VSZWdpc3RlcnNbaV0gKyBcIlxcblwiO1xuXG5cdFx0Y29kZSArPSBcIm1vdiBcIiArIHRoaXMucG9zaXRpb25UYXJnZXQgKyBcIi54eXosXCIgKyB0aGlzLnZlcnRleFplcm9Db25zdC50b1N0cmluZygpICsgXCJcXG5cIjtcblxuXHRcdGlmICh0aGlzLm5lZWRWZWxvY2l0eSlcblx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLnZlbG9jaXR5VGFyZ2V0ICsgXCIueHl6LFwiICsgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QudG9TdHJpbmcoKSArIFwiXFxuXCI7XG5cblx0XHRyZXR1cm4gY29kZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRDb21iaW5hdGlvbkNvZGUoKTpzdHJpbmdcblx0e1xuXHRcdHJldHVybiBcImFkZCBcIiArIHRoaXMuc2NhbGVBbmRSb3RhdGVUYXJnZXQgKyBcIi54eXosXCIgKyB0aGlzLnNjYWxlQW5kUm90YXRlVGFyZ2V0ICsgXCIueHl6LFwiICsgdGhpcy5wb3NpdGlvblRhcmdldCArIFwiLnh5elxcblwiO1xuXHR9XG5cblx0cHVibGljIGluaXRDb2xvclJlZ2lzdGVycygpOnN0cmluZ1xuXHR7XG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcblx0XHRpZiAodGhpcy5oYXNDb2xvck11bE5vZGUpIHtcblx0XHRcdHRoaXMuY29sb3JNdWxUYXJnZXQgPSB0aGlzLmdldEZyZWVWZXJ0ZXhWZWN0b3JUZW1wKCk7XG5cdFx0XHR0aGlzLmFkZFZlcnRleFRlbXBVc2FnZXModGhpcy5jb2xvck11bFRhcmdldCwgMSk7XG5cdFx0XHR0aGlzLmNvbG9yTXVsVmFyeSA9IHRoaXMuZ2V0RnJlZVZhcnlpbmcoKTtcblx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLmNvbG9yTXVsVGFyZ2V0ICsgXCIsXCIgKyB0aGlzLnZlcnRleE9uZUNvbnN0ICsgXCJcXG5cIjtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaGFzQ29sb3JBZGROb2RlKSB7XG5cdFx0XHR0aGlzLmNvbG9yQWRkVGFyZ2V0ID0gdGhpcy5nZXRGcmVlVmVydGV4VmVjdG9yVGVtcCgpO1xuXHRcdFx0dGhpcy5hZGRWZXJ0ZXhUZW1wVXNhZ2VzKHRoaXMuY29sb3JBZGRUYXJnZXQsIDEpO1xuXHRcdFx0dGhpcy5jb2xvckFkZFZhcnkgPSB0aGlzLmdldEZyZWVWYXJ5aW5nKCk7XG5cdFx0XHRjb2RlICs9IFwibW92IFwiICsgdGhpcy5jb2xvckFkZFRhcmdldCArIFwiLFwiICsgdGhpcy52ZXJ0ZXhaZXJvQ29uc3QgKyBcIlxcblwiO1xuXHRcdH1cblx0XHRyZXR1cm4gY29kZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRDb2xvclBhc3NDb2RlKCk6c3RyaW5nXG5cdHtcblx0XHR2YXIgY29kZTpzdHJpbmcgPSBcIlwiO1xuXHRcdGlmICh0aGlzLm5lZWRGcmFnbWVudEFuaW1hdGlvbiAmJiAodGhpcy5oYXNDb2xvckFkZE5vZGUgfHwgdGhpcy5oYXNDb2xvck11bE5vZGUpKSB7XG5cdFx0XHRpZiAodGhpcy5oYXNDb2xvck11bE5vZGUpXG5cdFx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLmNvbG9yTXVsVmFyeSArIFwiLFwiICsgdGhpcy5jb2xvck11bFRhcmdldCArIFwiXFxuXCI7XG5cdFx0XHRpZiAodGhpcy5oYXNDb2xvckFkZE5vZGUpXG5cdFx0XHRcdGNvZGUgKz0gXCJtb3YgXCIgKyB0aGlzLmNvbG9yQWRkVmFyeSArIFwiLFwiICsgdGhpcy5jb2xvckFkZFRhcmdldCArIFwiXFxuXCI7XG5cdFx0fVxuXHRcdHJldHVybiBjb2RlO1xuXHR9XG5cblx0cHVibGljIGdldENvbG9yQ29tYmluYXRpb25Db2RlKHNoYWRlZFRhcmdldDpzdHJpbmcpOnN0cmluZ1xuXHR7XG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcblx0XHRpZiAodGhpcy5uZWVkRnJhZ21lbnRBbmltYXRpb24gJiYgKHRoaXMuaGFzQ29sb3JBZGROb2RlIHx8IHRoaXMuaGFzQ29sb3JNdWxOb2RlKSkge1xuXHRcdFx0dmFyIGNvbG9yVGFyZ2V0OlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHRoaXMuZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKHNoYWRlZFRhcmdldCk7XG5cdFx0XHR0aGlzLmFkZEZyYWdtZW50VGVtcFVzYWdlcyhjb2xvclRhcmdldCwgMSk7XG5cdFx0XHRpZiAodGhpcy5oYXNDb2xvck11bE5vZGUpXG5cdFx0XHRcdGNvZGUgKz0gXCJtdWwgXCIgKyBjb2xvclRhcmdldCArIFwiLFwiICsgY29sb3JUYXJnZXQgKyBcIixcIiArIHRoaXMuY29sb3JNdWxWYXJ5ICsgXCJcXG5cIjtcblx0XHRcdGlmICh0aGlzLmhhc0NvbG9yQWRkTm9kZSlcblx0XHRcdFx0Y29kZSArPSBcImFkZCBcIiArIGNvbG9yVGFyZ2V0ICsgXCIsXCIgKyBjb2xvclRhcmdldCArIFwiLFwiICsgdGhpcy5jb2xvckFkZFZhcnkgKyBcIlxcblwiO1xuXHRcdH1cblx0XHRyZXR1cm4gY29kZTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0UmVnaXN0ZXJGcm9tU3RyaW5nKGNvZGU6c3RyaW5nKTpTaGFkZXJSZWdpc3RlckVsZW1lbnRcblx0e1xuXHRcdHZhciB0ZW1wOkFycmF5PHN0cmluZz4gPSBjb2RlLnNwbGl0KC8oXFxkKykvKTtcblx0XHRyZXR1cm4gbmV3IFNoYWRlclJlZ2lzdGVyRWxlbWVudCh0ZW1wWzBdLCBwYXJzZUludCh0ZW1wWzFdKSk7XG5cdH1cblxuXHRwdWJsaWMgdmVydGV4Q29uc3RhbnREYXRhOkFycmF5PG51bWJlcj4gPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXHRwdWJsaWMgZnJhZ21lbnRDb25zdGFudERhdGE6QXJyYXk8bnVtYmVyPiA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG5cblx0cHJpdmF0ZSBfbnVtVmVydGV4Q29uc3RhbnQ6bnVtYmVyIC8qaW50Ki87XG5cdHByaXZhdGUgX251bUZyYWdtZW50Q29uc3RhbnQ6bnVtYmVyIC8qaW50Ki87XG5cblx0cHVibGljIGdldCBudW1WZXJ0ZXhDb25zdGFudCgpOm51bWJlciAvKmludCovXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5fbnVtVmVydGV4Q29uc3RhbnQ7XG5cdH1cblxuXHRwdWJsaWMgZ2V0IG51bUZyYWdtZW50Q29uc3RhbnQoKTpudW1iZXIgLyppbnQqL1xuXHR7XG5cdFx0cmV0dXJuIHRoaXMuX251bUZyYWdtZW50Q29uc3RhbnQ7XG5cdH1cblxuXHRwdWJsaWMgc2V0RGF0YUxlbmd0aCgpXG5cdHtcblx0XHR0aGlzLl9udW1WZXJ0ZXhDb25zdGFudCA9IHRoaXMubnVtVXNlZFZlcnRleENvbnN0YW50cyAtIHRoaXMudmVydGV4Q29uc3RhbnRPZmZzZXQ7XG5cdFx0dGhpcy5fbnVtRnJhZ21lbnRDb25zdGFudCA9IHRoaXMubnVtVXNlZEZyYWdtZW50Q29uc3RhbnRzIC0gdGhpcy5mcmFnbWVudENvbnN0YW50T2Zmc2V0O1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhLmxlbmd0aCA9IHRoaXMuX251bVZlcnRleENvbnN0YW50KjQ7XG5cdFx0dGhpcy5mcmFnbWVudENvbnN0YW50RGF0YS5sZW5ndGggPSB0aGlzLl9udW1GcmFnbWVudENvbnN0YW50KjQ7XG5cdH1cblxuXHRwdWJsaWMgc2V0VmVydGV4Q29uc3QoaW5kZXg6bnVtYmVyIC8qaW50Ki8sIHg6bnVtYmVyID0gMCwgeTpudW1iZXIgPSAwLCB6Om51bWJlciA9IDAsIHc6bnVtYmVyID0gMClcblx0e1xuXHRcdHZhciBfaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSAoaW5kZXggLSB0aGlzLnZlcnRleENvbnN0YW50T2Zmc2V0KSo0O1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHg7XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0geTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSB6O1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleF0gPSB3O1xuXHR9XG5cblx0cHVibGljIHNldFZlcnRleENvbnN0RnJvbUFycmF5KGluZGV4Om51bWJlciAvKmludCovLCBkYXRhOkFycmF5PG51bWJlcj4pXG5cdHtcblx0XHR2YXIgX2luZGV4Om51bWJlciAvKmludCovID0gKGluZGV4IC0gdGhpcy52ZXJ0ZXhDb25zdGFudE9mZnNldCkqNDtcblx0XHRmb3IgKHZhciBpOm51bWJlciAvKmludCovID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspXG5cdFx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSBkYXRhW2ldO1xuXHR9XG5cblx0cHVibGljIHNldFZlcnRleENvbnN0RnJvbU1hdHJpeChpbmRleDpudW1iZXIgLyppbnQqLywgbWF0cml4Ok1hdHJpeDNEKVxuXHR7XG5cdFx0dmFyIHJhd0RhdGE6QXJyYXk8bnVtYmVyPiA9IG1hdHJpeC5yYXdEYXRhO1xuXHRcdHZhciBfaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSAoaW5kZXggLSB0aGlzLnZlcnRleENvbnN0YW50T2Zmc2V0KSo0O1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMF07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs0XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzhdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMTJdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMV07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs1XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzldO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMTNdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbMl07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVs2XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzEwXTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzE0XTtcblx0XHR0aGlzLnZlcnRleENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSByYXdEYXRhWzNdO1xuXHRcdHRoaXMudmVydGV4Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHJhd0RhdGFbN107XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4KytdID0gcmF3RGF0YVsxMV07XG5cdFx0dGhpcy52ZXJ0ZXhDb25zdGFudERhdGFbX2luZGV4XSA9IHJhd0RhdGFbMTVdO1xuXG5cdH1cblxuXHRwdWJsaWMgc2V0RnJhZ21lbnRDb25zdChpbmRleDpudW1iZXIgLyppbnQqLywgeDpudW1iZXIgPSAwLCB5Om51bWJlciA9IDAsIHo6bnVtYmVyID0gMCwgdzpudW1iZXIgPSAwKVxuXHR7XG5cdFx0dmFyIF9pbmRleDpudW1iZXIgLyppbnQqLyA9IChpbmRleCAtIHRoaXMuZnJhZ21lbnRDb25zdGFudE9mZnNldCkqNDtcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleCsrXSA9IHg7XG5cdFx0dGhpcy5mcmFnbWVudENvbnN0YW50RGF0YVtfaW5kZXgrK10gPSB5O1xuXHRcdHRoaXMuZnJhZ21lbnRDb25zdGFudERhdGFbX2luZGV4KytdID0gejtcblx0XHR0aGlzLmZyYWdtZW50Q29uc3RhbnREYXRhW19pbmRleF0gPSB3O1xuXHR9XG59XG5cbmV4cG9ydCA9IEFuaW1hdGlvblJlZ2lzdGVyQ2FjaGU7Il19